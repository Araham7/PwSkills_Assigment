/*

7. Password Checker.

Create a class called User with properties username and password. Implement a getter method for password that returns the password with all characters replaced by asterisks. Implement a setter method for password that checks if the new password is at least 8 characters long and contains at least one number and one uppercase letter. If the password is valid, set the new password. If not, log an error message.

*/


class User {
    constructor(username, password) {
        // Function to obfuscate the password with asterisks
        const removePassword = (pass) => {
            return '*'.repeat(pass.length); // Simplified to repeat the asterisk
        };

        this.username = username;
        this.password = removePassword(password.toString()); // Ensure the password is a string
    }

    // Getter to retrieve the obfuscated password
    get password() {
        return this.password;
    }

    // Setter to set a new password with validation
    set password(newPassword) {
        try {
            const passwordRegex = /^(?=.*[A-Z])(?=.*\d)[A-Za-z\d]{8,}$/; // At least one uppercase, one digit, and min 8 chars
            const isValidPassword = passwordRegex.test(newPassword);

            if (isValidPassword) {
                this.password = removePassword(newPassword); // Store the obfuscated password
            } else {
                throw new Error("Invalid Password! It must be at least 8 characters long, contain at least one uppercase letter and one digit.");
            }
        } catch (error) {
            console.log(error.message);
            
        }
    }
}

// Example usage
let user1 = new User("Araham", "2654875263"); // Password is passed as a string
console.log(user1.password); // Accessing the obfuscated password

// Attempt to set a new valid password
user1.password = "NewPassword1"; // This will call the setter method
console.log(user1.password); // Accessing the updated obfuscated password

// Attempt to set an invalid password
user1.password = "password"; // This will trigger the error
